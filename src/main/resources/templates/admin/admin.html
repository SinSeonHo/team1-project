<!DOCTYPE html>
<html layout:decorate="~{layouts/layout}">
  <head>
    <meta charset="UTF-8" />
    <title>관리자 페이지</title>
    <link rel="stylesheet" th:href="@{./admin.css}" />

    <!-- CSRF 메타태그 추가 -->
    <th:block layout:fragment="metadata">
      <!-- 없으면 렌더링 안 함 -->
      <meta name="_csrf" th:if="${_csrf != null}" th:content="${_csrf.token}" />
      <meta name="_csrf_header" th:if="${_csrf != null}" th:content="${_csrf.headerName}" />
    </th:block>

    <!-- JS 분리 후 외부 파일로 불러오기 -->
    <script th:src="@{/js/admin.js}"></script>
    <style>
      .btn {
        display: inline-block;
        padding: 10px 20px;
        background-color: #007bff;
        color: white;
        border-radius: 5px;
        text-decoration: none;
      }
      .btn:hover {
        background-color: #0056b3;
      }
    </style>
  </head>

  <body layout:fragment="content">
    <h1 class="text-center">관리자 크롤링 페이지</h1>

    <div class="button-container">
      <!-- 영화 API 불러오기 -->
      <button class="btn btn-primary" onclick="sendAsyncRequest('/admin/import/movies', '영화 API 요청 완료')">
        영화 API 불러오기
      </button>

      <!-- 게임 API 불러오기 -->
      <button class="btn btn-primary" onclick="sendAsyncRequest('/admin/import/games', '게임 API 요청 완료')">
        게임 API 불러오기
      </button>

      <!-- 영화 이미지 크롤링 -->
      <button class="btn btn-primary" onclick="sendAsyncRequest('/admin/crawl/movie', '영화 이미지 크롤링 시작됨')">
        영화 이미지 불러오기
      </button>

      <!-- 게임 이미지 크롤링 -->
      <button class="btn btn-primary" onclick="sendAsyncRequest('/admin/crawl/game', '게임 이미지 크롤링 시작됨')">
        게임 이미지 불러오기
      </button>

      <!-- 관리자 신고 리스트 페이지 -->
      <a th:href="@{/report/list}" class="btn">관리자 신고 리스트 페이지</a>
    </div>
  </body>
</html>
